function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o.apply(null,arguments)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function a(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}function u(t){if(t&&"object"==typeof t){if(Object.prototype.hasOwnProperty.call(t,"__isNodeRef")&&t.nodeId&&Array.isArray(t.path)){var e=t.path.join(".");return"{{node."+t.nodeId+".body"+(e?"."+e:"")+"}}"}if(Object.prototype.hasOwnProperty.call(t,"__isEventRef")&&Array.isArray(t.path))return"{{"+t.path.join(".")+"}}";if(Object.prototype.hasOwnProperty.call(t,"__isTemplateRef")&&t.template)return t.template;if(Array.isArray(t))return t.map(u);if(t.constructor===Object){for(var r={},n=0,o=Object.keys(t);n<o.length;n++){var i=o[n];r[i]=u(t[i])}return r}}return t}function c(t,e){return void 0===e&&(e=[]),new Proxy({__isNodeRef:!0,nodeId:t,path:e},{get:function(r,n){return"string"!=typeof n||n in r?r[n]:c(t,[].concat(e,[n]))}})}var p,d,f,_,l,h,E,A,w=[],b=/*#__PURE__*/function(){function t(e){this.id=void 0,this.slug=void 0,this.action=void 0,this.input=void 0,this.next_node=[],this._next_refs=[],this._parent_node=null,this.id=String(t._counter++),this.slug=e.slug,this.action=e.action,this.input=u(e.input);var r=t.getCurrentForLoopContext();r&&r.addToForLoop(this)}var e=t.prototype;return e.next=function(t){return this.next_node.push(t.id),this._next_refs.push(t),t},e.setParentNode=function(t){this._parent_node=t},t.pushForLoopContext=function(t){w.push(t)},t.popForLoopContext=function(){return w.pop()},t.getCurrentForLoopContext=function(){return w.length>0?w[w.length-1]:null},t.clearForLoopContext=function(){w=[]},e.validateInput=function(){},r(t,[{key:"nextRefs",get:function(){return this._next_refs}},{key:"parentNode",get:function(){return this._parent_node}},{key:"parent_node",get:function(){return this._parent_node?this._parent_node.id:null}},{key:"body",get:function(){return c(this.id,[])}}])}();b._counter=1,exports.Actions=void 0,(p=exports.Actions||(exports.Actions={})).no_action="no_action",p.http_request="httprequest",exports.DelayActions=void 0,(d=exports.DelayActions||(exports.DelayActions={})).WAIT_FOR="wait_for",d.WAIT_TILL="wait_till",exports.FileHandlerActions=void 0,(exports.FileHandlerActions||(exports.FileHandlerActions={})).UPLOAD_FILE_TO_BUCKET_FROM_URL="upload_file_to_bucket_from_url",exports.TableActions=void 0,(f=exports.TableActions||(exports.TableActions={})).CREATE_TABLE="create_table",f.DELETE_TABLE="delete_table",f.GET_TABLES="get_tables",f.ADD_TABLE_RECORD="add_table_record",f.SEARCH_TABLE_RECORDS="search_table_records",f.GET_TABLE_RECORDS="get_table_records",f.UPDATE_TABLE_RECORD="update_table_record",f.DELETE_TABLE_RECORD="delete_table_record",exports.PDFActions=void 0,(_=exports.PDFActions||(exports.PDFActions={})).CREATE_PDF_FROM_HTML="create_pdf_from_html",_.MERGE_PDFS="merge_pdfs",exports.DataRefActions=void 0,(l=exports.DataRefActions||(exports.DataRefActions={})).CREATE_REF="create_ref",l.CREATE_BULK_REF="create_bulk_ref",l.GET_REF_BY_RECORD_ID="get_ref_by_record_id",l.GET_REF_BY_EXTERNAL_ID="get_ref_by_external_id",l.DELETE_REF_BY_RECORD_ID="delete_ref_by_record_id",exports.CsvExcelActions=void 0,(h=exports.CsvExcelActions||(exports.CsvExcelActions={})).CSV_TO_JSON="csv_to_json",h.JSON_TO_CSV="json_to_csv",h.PARSE_CSV_TO_ARRAY="parse_csv_to_array",h.ARRAY_OF_ROWS_TO_CSV="array_of_rows_to_csv",h.JSON_TO_EXCEL="json_to_excel",h.JSON_DATA_TO_EXCEL="json_data_to_excel",h.CSV_TO_EXCEL="csv_to_excel",h.MERGE_EXCEL_FILES="merge_excel_files",h.WRITE_DATA_TO_FILE="write_data_to_file",exports.StartNodeTrigger=void 0,(E=exports.StartNodeTrigger||(exports.StartNodeTrigger={})).API_CALL="api_call",E.CRON="cron",E.EVENT="event",exports.GroupActions=void 0,(A=exports.GroupActions||(exports.GroupActions={})).ArrayIteration="array_iteration",A.FixedIteration="fixed_iteration";var y=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,{slug:"rule",action:exports.Actions.no_action,input:{operation:e.operation,rules:e.rules}})||this)._true_refs=[],r._false_refs=[],r.true_node=[],r.false_node=[],r}i(e,t);var n=e.prototype;return n.next=function(t){throw new Error("RuleNode is a branching node. Use .trueNext() or .falseNext() instead of .next()")},n.trueNext=function(t){if(this._true_refs.some(function(e){return e===t}))throw new Error("Duplicate node detected in true branch. Node is already included.");if(this._false_refs.some(function(e){return e===t}))throw new Error("Node is already included in the false branch. Cannot add it to the true branch.");return this.true_node.push(t.id),this._true_refs.push(t),t},n.falseNext=function(t){if(this._false_refs.some(function(e){return e===t}))throw new Error("Duplicate node detected in false branch. Node is already included.");if(this._true_refs.some(function(e){return e===t}))throw new Error("Node is already included in the true branch. Cannot add it to the false branch.");return this.false_node.push(t.id),this._false_refs.push(t),t},n.validateInput=function(){if(0===this.true_node.length&&0===this.false_node.length)throw new Error("RuleNode must have at least one true or false branch defined")},r(e,[{key:"trueRefs",get:function(){return this._true_refs}},{key:"falseRefs",get:function(){return this._false_refs}}])}(b),v=[],T=/*#__PURE__*/function(t){function e(e){var r,n=e.callback_fn;return(r=t.call(this,{slug:"group",action:e.iteration_type,input:{array_item:e.array_item,fixed_iteration:e.fixed_iteration}})||this)._entry_node_ref=null,r.entry_node=null,r._group_nodes=new Map,r._for_loop_nodes=[],r._is_in_for_loop=!1,r._callback_fn=void 0,v.push(r),r._callback_fn=n,r}i(e,t);var n=e.prototype;return n.executeCallback=function(){var t=this;if(this._callback_fn){this.startForLoopContext(),this.constructor.pushForLoopContext(this);var e=new Proxy({},{get:function(e,r){return"toString"===r||"valueOf"===r||"toJSON"===r?e[r]:"{{node."+t.id+".body.array_item."+String(r)+"}}"}});this._callback_fn(e),this.constructor.popForLoopContext(),this.endForLoopContext()}},e.getAllGroupNodes=function(){return[].concat(v)},e.clearRegistry=function(){v.length=0},n.setEntryNode=function(t){this._entry_node_ref=t,this.entry_node=t.id},n.next=function(e){return e.id.includes(".")?this:t.prototype.next.call(this,e)},n.startForLoopContext=function(){this._is_in_for_loop=!0,this._for_loop_nodes=[]},n.endForLoopContext=function(){this._is_in_for_loop=!1},n.trackForLoopNode=function(t){this._is_in_for_loop&&this._for_loop_nodes.push(t)},n.addForLoopNode=function(t){this._for_loop_nodes.push(t)},n.processForLoopNodes=function(){var t=this;if(0!==this._for_loop_nodes.length){var e=new Map;this._for_loop_nodes.forEach(function(r,n){var o=r.id,i=String(b._counter++);t._group_nodes.set(i,r),r.id=i,e.set(o,i)}),this._for_loop_nodes.forEach(function(r){t.processNodeInput(r,null,0),t.reResolveTemplates(r,e)}),this._for_loop_nodes.forEach(function(t){Array.isArray(t.next_node)&&(t.next_node=t.next_node.map(function(t){return e.get(t)||t})),"true_node"in t&&Array.isArray(t.true_node)&&(t.true_node=t.true_node.map(function(t){return e.get(t)||t})),"false_node"in t&&Array.isArray(t.false_node)&&(t.false_node=t.false_node.map(function(t){return e.get(t)||t}))});var r=this._for_loop_nodes[0];r&&this.setEntryNode(r),this._for_loop_nodes=[]}},n.addToForLoop=function(t){t.setParentNode(this),this._for_loop_nodes.push(t)},n.processNodeInput=function(t,e,r){t.input&&"object"==typeof t.input&&(t.input=this.keepTemplatesAsIs(t.input))},n.keepTemplatesAsIs=function(t){var e=this;if(t&&"object"==typeof t){if("string"==typeof t)return this.replaceArrayItemInString(t,null,0);if(Array.isArray(t))return t.map(function(t){return e.keepTemplatesAsIs(t)});if(t.constructor===Object){for(var r={},n=0,o=Object.keys(t);n<o.length;n++){var i=o[n];r[i]=this.keepTemplatesAsIs(t[i])}return r}}return t},n.replaceArrayItemInString=function(t,e,r){var n=this;return t.replace(/\barray_item\.(\w+)\b/g,function(t,e){return"{{node."+n.id+".array_item."+e+"}}"})},n.reResolveTemplates=function(t,e){t.input&&"object"==typeof t.input&&(t.input=this.reResolveTemplatesInObject(t.input,e))},n.reResolveTemplatesInObject=function(t,e){var r=this;if(t&&"object"==typeof t){if(Array.isArray(t))return t.map(function(t){return r.reResolveTemplatesInObject(t,e)});if(t.constructor===Object){for(var n={},o=0,i=Object.keys(t);o<i.length;o++){var s=i[o];n[s]=this.reResolveTemplatesInObject(t[s],e)}return n}}else if("string"==typeof t)return this.reResolveTemplatesInString(t,e);return t},n.reResolveTemplatesInString=function(t,e){return t.replace(/\{\{node\.(\d+)\./g,function(t,r){var n=e.get(r);return n?"{{node."+n+".":t})},r(e,[{key:"callback_fn",get:function(){return this._callback_fn}},{key:"entryNode",get:function(){return this._entry_node_ref}},{key:"groupNodes",get:function(){return Array.from(this._group_nodes.values())}}])}(b),R=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,{slug:"switch",action:exports.Actions.no_action,input:{switch_value:e.switch_value}})||this)._cases=new Map,r._caseRefs=new Map,r._defaultCase=[],r._defaultRefs=[],r}i(e,t);var o=e.prototype;return o.next=function(t){throw new Error("SwitchNode is a branching node. Use .addCase() or .setDefault() instead of .next()")},o.addCase=function(t,e){var r=this;return this._cases.has(t)||(this._cases.set(t,[]),this._caseRefs.set(t,[])),(Array.isArray(e)?e:[e]).forEach(function(e){if(r._caseRefs.get(t).some(function(t){return t===e}))throw new Error("Duplicate node detected in case '"+t+"'. Node is already included in this case.");if(r._defaultRefs.some(function(t){return t===e}))throw new Error("Node is already included in the default case. Cannot add it to case '"+t+"'.");for(var o,i=n(r._caseRefs.entries());!(o=i()).done;){var s=o.value,a=s[0];if(a!==t&&s[1].some(function(t){return t===e}))throw new Error("Node is already included in case '"+a+"'. Cannot add it to case '"+t+"'.")}r._cases.get(t).push(e.id),r._caseRefs.get(t).push(e)}),this},o.setDefault=function(t){var e=this;return(Array.isArray(t)?t:[t]).forEach(function(t){if(e._defaultRefs.some(function(e){return e===t}))throw new Error("Duplicate node detected in default case. Node is already included.");for(var r,o=n(e._caseRefs.entries());!(r=o()).done;){var i=r.value,s=i[0];if(i[1].some(function(e){return e===t}))throw new Error("Node is already included in case '"+s+"'. Cannot add it to the default case.")}e._defaultCase.push(t.id),e._defaultRefs.push(t)}),this},o.validateInput=function(){if(!this.input.switch_value)throw new Error("Input must contain switch_value for SwitchNode");if(0===this._cases.size&&0===this._defaultCase.length)throw new Error("SwitchNode must have at least one case or default case defined")},r(e,[{key:"cases",get:function(){return Array.from(this._cases.keys())}},{key:"caseRefs",get:function(){return this._caseRefs}},{key:"defaultRefs",get:function(){return this._defaultRefs}},{key:"casesForSerialization",get:function(){var t={};return this._cases.forEach(function(e,r){t[r]=e}),t}},{key:"defaultCase",get:function(){return this._defaultCase}}])}(b),m=/*#__PURE__*/function(){function t(){this.startNode=void 0}var e=t.prototype;return e.trigger=function(t){this.startNode=t},e.build=function(){if(!this.startNode)throw new Error("No start node set. Use trigger(startNode)");if(void 0===this.startNode.input.trigger_type)throw new Error("StartNode trigger_type cannot be undefined");var t=[],e=new Set;!function r(o,i){if(void 0===i&&(i=[]),o){if(e.has(o.id))throw new Error("Infinite loop detected in workflow at node id: "+o.id+" (path: "+[].concat(i,[o.id]).join(" -> ")+")");if(t.push(o),e.add(o.id),o instanceof T&&o.entryNode&&r(o.entryNode,[].concat(i,[o.id])),o instanceof y){for(var s,a=n(o.trueRefs);!(s=a()).done;)r(s.value,[].concat(i,[o.id]));for(var u,c=n(o.falseRefs);!(u=c()).done;)r(u.value,[].concat(i,[o.id]))}if(o instanceof R){for(var p,d=n(o.caseRefs.values());!(p=d()).done;)for(var f,_=n(p.value);!(f=_()).done;)r(f.value,[].concat(i,[o.id]));for(var l,h=n(o.defaultRefs);!(l=h()).done;)r(l.value,[].concat(i,[o.id]))}for(var E,A=n(o.nextRefs||[]);!(E=A()).done;)r(E.value,[].concat(i,[o.id]))}}(this.startNode),this.processAllGroupNodes(t);var r=T.getAllGroupNodes(),i=new Set(t.filter(function(t){return t instanceof T}).map(function(t){return t.id}));r.forEach(function(e){i.has(e.id)||t.push(e)});var s=new Set;return r.forEach(function(t){t.groupNodes&&t.groupNodes.forEach(function(t){s.add(t.id)})}),r.forEach(function(e){e.groupNodes&&e.groupNodes.forEach(function(e){t.some(function(t){return t.id===e.id})||t.push(e)})}),t.map(function(t){t.validateInput();var e={id:t.id,slug:t.slug,action:t.action,input:t.input,next_node:t.next_node,parent_node:t.parent_node};return t instanceof y?o({},e,{true_nodes:t.true_node,false_nodes:t.false_node,next_node:[].concat(t.true_node,t.false_node)}):t instanceof R?o({},e,{cases:t.casesForSerialization,default_case:t.defaultCase,next_node:[].concat(Object.values(t.casesForSerialization).flat(),t.defaultCase)}):t instanceof T?o({},e,{entry_node:t.entry_node,group_nodes:t.groupNodes.map(function(t){return t.id})}):e})},e.processAllGroupNodes=function(t){T.getAllGroupNodes().forEach(function(t){t.callback_fn&&t.executeCallback(),t.processForLoopNodes()})},e.printMermaid=function(){for(var t,e=this.build(),r="flowchart TD\n",o=e.reduce(function(t,e){var r=e.slug+" ("+e.id+")";if("entry_node"in e&&e.entry_node&&(r="Group: "+e.slug+" ("+e.id+")"),e.id.includes(".")){var n=e.id.split(".");n.length>=3&&(r=e.slug+" ["+n[1]+"] ("+e.id+")")}return t[e.id]=r,t},{}),i=function(){var n=t.value,i="";"entry_node"in n&&n.entry_node?i=e.some(function(t){return"group_nodes"in t&&Array.isArray(t.group_nodes)&&t.group_nodes.includes(n.id)})?":::nestedGroupNode":":::groupNode":n.id.includes(".")&&(i=":::groupChildNode"),r+="  "+n.id+'["'+o[n.id]+'"]'+i+"\n"},s=n(e);!(t=s()).done;)i();for(var a,u=function(){var t=a.value;if(Array.isArray(t.next_node))for(var o,i=function(){var n=o.value;e.some(function(t){return t.id===n})&&(r+="  "+t.id+" --\x3e "+n+"\n")},s=n(t.next_node);!(o=s()).done;)i();if("truth_node"in t&&Array.isArray(t.truth_node))for(var u,c=function(){var n=u.value;e.some(function(t){return t.id===n})&&(r+="  "+t.id+" --|truth|--\x3e "+n+"\n")},p=n(t.truth_node);!(u=p()).done;)c();if("falsy_node"in t&&Array.isArray(t.falsy_node))for(var d,f=function(){var n=d.value;e.some(function(t){return t.id===n})&&(r+="  "+t.id+" --|falsy|--\x3e "+n+"\n")},_=n(t.falsy_node);!(d=_()).done;)f();"entry_node"in t&&t.entry_node&&e.some(function(e){return e.id===t.entry_node})&&(r+="  "+t.id+" -.-> "+t.entry_node+"\n")},c=n(e);!(a=c()).done;)u();for(var p,d=n(e);!(p=d()).done;){var f=p.value;if("group_nodes"in f&&Array.isArray(f.group_nodes))for(var _,l=function(){var t=_.value,n=e.find(function(e){return e.id===t});n&&"entry_node"in n&&(r+="  "+f.id+" -.->|nested| "+t+"\n")},h=n(f.group_nodes);!(_=h()).done;)l()}return r+="\n  classDef groupNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px\n",r+="  classDef nestedGroupNode fill:#fff3e0,stroke:#f57c00,stroke-width:2px\n",r+="  classDef groupChildNode fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px\n"},t}();function x(t){void 0===t&&(t=[]);var e={__isEventRef:!0,path:["event"].concat(t)};return new Proxy(e,{get:function(e,r){return"string"!=typeof r||r in e?e[r]:x([].concat(t,[r]))}})}var g,D,C=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"start",action:exports.Actions.no_action,input:{trigger_type:e.trigger_type,event_id:e.event_id,cron_expression:e.cron_expression,api_call_payload:e.api_call_payload}})||this}return i(e,t),r(e,[{key:"event",get:function(){return x([])}}])}(b),O=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"httpinternal",action:exports.Actions.http_request,input:{url:e.url,method:e.method,body:e.body,query_params:e.query_params,headers:e.headers}})||this}return i(e,t),e}(b),L=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"response",action:exports.Actions.no_action,input:{data:e.data}})||this}return i(e,t),e}(b),I=/*#__PURE__*/function(t){function e(e){var r,n,o=e.parameters,i=e.function,s=i.toString();if(s.includes("=>")){var a=s.indexOf("=>"),u=s.substring(0,a).trim(),c=s.substring(a+2).trim(),p=u.match(/^\(([^)]+)\)$/),d=p?p[1]:u.replace(/^\(|\)$/g,"");n=c.startsWith("{")&&c.endsWith("}")?"function yourFunction("+d+") {\n  "+c.slice(1,-1).trim()+"\n}":"function yourFunction("+d+") {\n  return "+c+";\n}"}else n=s.replace(/^function\s+\w+\s*\(/,"function yourFunction(");return(r=t.call(this,{slug:"codeexecutornode",action:exports.Actions.no_action,input:{parameters:o,function:n}})||this)._codeFunction=void 0,r._codeFunction=i,r}return i(e,t),r(e,[{key:"codeFunction",get:function(){return this._codeFunction}}])}(b),N=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:e.application_slug,action:e.action,input:e.input})||this}return i(e,t),e}(b);exports.Operators=void 0,(g=exports.Operators||(exports.Operators={})).eq="eq",g.neq="neq",g.gt="gt",g.gte="gte",g.lt="lt",g.lte="lte",g.in="in",g.nin="nin",g.contains="contains",g.not_contains="not_contains",exports.Operations=void 0,(D=exports.Operations||(exports.Operations={})).AND="and",D.OR="or";var S=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"delay",action:e.action,input:e.input})||this}i(e,t);var r=e.prototype;return r.validateInput=function(){if(!Object.values(exports.DelayActions).includes(this.action))throw new Error("Invalid action for DelayNode: "+this.action);this.action===exports.DelayActions.WAIT_FOR?this.validateWaitForInput():this.action===exports.DelayActions.WAIT_TILL&&this.validateWaitTillInput()},r.validateWaitForInput=function(){if(void 0!==this.input.days&&("number"!=typeof this.input.days||this.input.days<0||this.input.days>30))throw new Error("days must be a number between 0 and 30 for "+exports.DelayActions.WAIT_FOR);if(void 0!==this.input.hours&&("number"!=typeof this.input.hours||this.input.hours<0||this.input.hours>23))throw new Error("hours must be a number between 0 and 23 for "+exports.DelayActions.WAIT_FOR);if(void 0!==this.input.minutes&&("number"!=typeof this.input.minutes||this.input.minutes<0||this.input.minutes>59))throw new Error("minutes must be a number between 0 and 59 for "+exports.DelayActions.WAIT_FOR);if(void 0!==this.input.seconds&&("number"!=typeof this.input.seconds||this.input.seconds<0||this.input.seconds>59))throw new Error("seconds must be a number between 0 and 59 for "+exports.DelayActions.WAIT_FOR);if(!(this.input.days||this.input.hours||this.input.minutes||this.input.seconds))throw new Error("At least one time unit (days, hours, minutes, or seconds) must be provided for "+exports.DelayActions.WAIT_FOR)},r.validateWaitTillInput=function(){if(void 0!==this.input.days&&("number"!=typeof this.input.days||this.input.days<0||this.input.days>30))throw new Error("days must be a number between 0 and 30 for "+exports.DelayActions.WAIT_TILL);if(void 0!==this.input.hours&&("number"!=typeof this.input.hours||this.input.hours<0||this.input.hours>23))throw new Error("hours must be a number between 0 and 23 for "+exports.DelayActions.WAIT_TILL);if(void 0!==this.input.minutes&&("number"!=typeof this.input.minutes||this.input.minutes<0||this.input.minutes>59))throw new Error("minutes must be a number between 0 and 59 for "+exports.DelayActions.WAIT_TILL);if(void 0!==this.input.seconds&&("number"!=typeof this.input.seconds||this.input.seconds<0||this.input.seconds>59))throw new Error("seconds must be a number between 0 and 59 for "+exports.DelayActions.WAIT_TILL);if(void 0!==this.input.before_or_after&&"+"!==this.input.before_or_after&&"-"!==this.input.before_or_after)throw new Error("before_or_after must be either '+' or '-' for "+exports.DelayActions.WAIT_TILL);if(void 0!==this.input.base_date){if("string"!=typeof this.input.base_date)throw new Error("base_date must be a string for "+exports.DelayActions.WAIT_TILL);var t=this.input.base_date;if(![/^\d{4}-\d{2}-\d{2}$/,/^\d{4}\/\d{2}\/\d{2}$/,/^\d{2}\/\d{2}\/\d{4}$/].some(function(e){return e.test(t)}))throw new Error("base_date must be in valid JS Date format (ISO format, YYYY/MM/DD, MM/DD/YYYY) for "+exports.DelayActions.WAIT_TILL+". 'DD/MM/YYYY' is not a valid JS Date format.");var e=new Date(t);if(isNaN(e.getTime()))throw new Error("base_date must be a valid date for "+exports.DelayActions.WAIT_TILL)}if(!(this.input.days||this.input.hours||this.input.minutes||this.input.seconds))throw new Error("At least one time unit (days, hours, minutes, or seconds) must be provided for "+exports.DelayActions.WAIT_TILL)},e}(b),F=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"email",action:exports.Actions.no_action,input:e.input})||this}return i(e,t),e.prototype.validateInput=function(){if(!this.input.host||!this.input.port||!this.input.user||!this.input.pass||!0!==this.input.secure&&!1!==this.input.secure)throw new Error("Input must contain host, port, user, pass, and secure for EmailNode");if(this.input.secure&&465!==this.input.port&&587!==this.input.port)throw new Error("Input port must be 465 or 587 when secure is true for EmailNode");if(!(this.input.from&&this.input.to&&this.input.subject&&this.input.body))throw new Error("Input must contain from, to, subject, and body for EmailNode")},e}(b),B=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"file_handler",action:exports.FileHandlerActions.UPLOAD_FILE_TO_BUCKET_FROM_URL,input:e.input})||this}return i(e,t),e.prototype.validateInput=function(){if(!this.input.source_url)throw new Error("source_url is required");if(!this.input.destination_file_name)throw new Error("destination_file_name is required");if(!this.input.storage_provider)throw new Error("storage_provider is required");var t=["AWS","GCS","MINIO"];if(!t.includes(this.input.storage_provider))throw new Error("storage_provider must be one of: "+t.join(", "))},e}(b),k=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"pdf",action:e.action,input:e.input})||this}return i(e,t),e.prototype.validateInput=function(){if(!Object.values(exports.PDFActions).includes(this.action))throw new Error("Invalid action for PDFNode: "+this.action);if(this.action===exports.PDFActions.CREATE_PDF_FROM_HTML&&(!this.input.html||"string"!=typeof this.input.html))throw new Error("Input must contain html as a string for CREATE_PDF_FROM_HTML action");if(!(this.action!==exports.PDFActions.MERGE_PDFS||this.input.pdfs&&Array.isArray(this.input.pdfs)))throw new Error("Input must contain pdfs as an array for MERGE_PDFS action")},e}(b),j=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"data_mapper",action:exports.Actions.no_action,input:{input:e.input,mapping:e.mapping,direction:e.direction}})||this}return i(e,t),e.prototype.validateInput=function(){if(!this.input.input)throw new Error("input is required in input for DataMapperNode (Field You Want To Map)");if(!this.input.mapping)throw new Error("mapping is required in input for DataMapperNode (Mapping Of The Field You Want To Map)");if("right"!==this.input.direction&&"left"!==this.input.direction)throw new Error("direction is required in input for DataMapperNode (right or left)")},e}(b),q=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"dataref",action:e.action,input:e.input})||this}return i(e,t),e.prototype.validateInput=function(){if(!Object.values(exports.DataRefActions).includes(this.action))throw new Error("Invalid action for DataRefNode: "+this.action);switch(this.action){case exports.DataRefActions.CREATE_REF:if(!this.input.name||!this.input.record_id||!this.input.external_id)throw new Error("name, record_id, and external_id are required in input for "+exports.DataRefActions.CREATE_REF);break;case exports.DataRefActions.CREATE_BULK_REF:if(!this.input.name||!Array.isArray(this.input.refs)||0===this.input.refs.length||!this.input.refs.every(function(t){return t&&"object"==typeof t&&"string"==typeof t.record_id&&"string"==typeof t.external_id}))throw new Error("name and refs (array of {record_id, external_id}) are required in input for "+exports.DataRefActions.CREATE_BULK_REF);break;case exports.DataRefActions.GET_REF_BY_RECORD_ID:if(!this.input.name||!this.input.record_id)throw new Error("name and record_id are required in input for "+exports.DataRefActions.GET_REF_BY_RECORD_ID);break;case exports.DataRefActions.GET_REF_BY_EXTERNAL_ID:if(!this.input.name||!this.input.external_id)throw new Error("name and external_id are required in input for "+exports.DataRefActions.GET_REF_BY_EXTERNAL_ID);break;case exports.DataRefActions.DELETE_REF_BY_RECORD_ID:if(!this.input.name||!this.input.record_id)throw new Error("name and record_id are required in input for "+exports.DataRefActions.DELETE_REF_BY_RECORD_ID)}},e}(b),P=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"table",action:e.action,input:e.input})||this}i(e,t);var r=e.prototype;return r.validateInput=function(){if(!Object.values(exports.TableActions).includes(this.action))throw new Error("Invalid action for TableNode: "+this.action);switch(this.action){case exports.TableActions.CREATE_TABLE:this.validateCreateTableInput();break;case exports.TableActions.DELETE_TABLE:this.validateDeleteTableInput();break;case exports.TableActions.GET_TABLES:this.validateGetTablesInput();break;case exports.TableActions.ADD_TABLE_RECORD:this.validateAddTableRecordInput();break;case exports.TableActions.SEARCH_TABLE_RECORDS:this.validateSearchTableRecordsInput();break;case exports.TableActions.GET_TABLE_RECORDS:this.validateGetTableRecordsInput();break;case exports.TableActions.UPDATE_TABLE_RECORD:this.validateUpdateTableRecordInput();break;case exports.TableActions.DELETE_TABLE_RECORD:this.validateDeleteTableRecordInput();break;default:throw new Error("Unsupported action for TableNode: "+this.action)}},r.validateCreateTableInput=function(){if(!this.input.type)throw new Error("type is required for CREATE_TABLE action");if("string"!=typeof this.input.type)throw new Error("type must be a string for CREATE_TABLE action");if(!["persistent","non_persistent"].includes(this.input.type))throw new Error("type must be 'persistent' or 'non_persistent' for CREATE_TABLE action");if(!this.input.name)throw new Error("name is required for CREATE_TABLE action");if("string"!=typeof this.input.name)throw new Error("name must be a string for CREATE_TABLE action");if(!this.input.columns)throw new Error("columns is required for CREATE_TABLE action");if(!Array.isArray(this.input.columns))throw new Error("columns must be an array for CREATE_TABLE action");if(0===this.input.columns.length)throw new Error("columns array cannot be empty for CREATE_TABLE action");for(var t=0;t<this.input.columns.length;t++){var e=this.input.columns[t];if(!e.column_name||"string"!=typeof e.column_name)throw new Error("column "+(t+1)+" must have a valid column_name string for CREATE_TABLE action")}},r.validateDeleteTableInput=function(){if(!this.input.table_id)throw new Error("table_id is required for DELETE_TABLE action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for DELETE_TABLE action")},r.validateGetTablesInput=function(){if(!this.input.type)throw new Error("type is required for GET_TABLES action");if("string"!=typeof this.input.type)throw new Error("type must be a string for GET_TABLES action");if(!["persistent","non_persistent"].includes(this.input.type))throw new Error("type must be 'persistent' or 'non_persistent' for GET_TABLES action")},r.validateAddTableRecordInput=function(){if(!this.input.table_id)throw new Error("table_id is required for ADD_TABLE_RECORD action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for ADD_TABLE_RECORD action");if(!this.input.table)throw new Error("table is required for ADD_TABLE_RECORD action");if("string"!=typeof this.input.table)throw new Error("table must be a string for ADD_TABLE_RECORD action");if(!/^(persistent|non_persistent):.+/.test(this.input.table))throw new Error("table must be in format 'persistent:table_name' or 'non_persistent:table_name' for ADD_TABLE_RECORD action");if(!this.input.data)throw new Error("data is required for ADD_TABLE_RECORD action");if("object"!=typeof this.input.data||null===this.input.data)throw new Error("data must be an object for ADD_TABLE_RECORD action")},r.validateSearchTableRecordsInput=function(){if(!this.input.table_id)throw new Error("table_id is required for SEARCH_TABLE_RECORDS action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for SEARCH_TABLE_RECORDS action");if(!this.input.table)throw new Error("table is required for SEARCH_TABLE_RECORDS action");if("string"!=typeof this.input.table)throw new Error("table must be a string for SEARCH_TABLE_RECORDS action");if(!/^(persistent|non_persistent):.+/.test(this.input.table))throw new Error("table must be in format 'persistent:table_name' or 'non_persistent:table_name' for SEARCH_TABLE_RECORDS action");if(!this.input.data)throw new Error("data is required for SEARCH_TABLE_RECORDS action");if("object"!=typeof this.input.data||null===this.input.data)throw new Error("data must be an object for SEARCH_TABLE_RECORDS action");if(!this.input.data.record_id&&!this.input.data.column_name)throw new Error("data must contain either record_id or column_name for SEARCH_TABLE_RECORDS action")},r.validateGetTableRecordsInput=function(){if(!this.input.table_id)throw new Error("table_id is required for GET_TABLE_RECORDS action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for GET_TABLE_RECORDS action")},r.validateUpdateTableRecordInput=function(){if(!this.input.record_id)throw new Error("record_id is required for UPDATE_TABLE_RECORD action");if("string"!=typeof this.input.record_id)throw new Error("record_id must be a string for UPDATE_TABLE_RECORD action");if(!this.input.table)throw new Error("table is required for UPDATE_TABLE_RECORD action");if("string"!=typeof this.input.table)throw new Error("table must be a string for UPDATE_TABLE_RECORD action");if(!/^(persistent|non_persistent):.+/.test(this.input.table))throw new Error("table must be in format 'persistent:table_name' or 'non_persistent:table_name' for UPDATE_TABLE_RECORD action");if(!this.input.table_id)throw new Error("table_id is required for UPDATE_TABLE_RECORD action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for UPDATE_TABLE_RECORD action");if(!this.input.update_data)throw new Error("update_data is required for UPDATE_TABLE_RECORD action");if("object"!=typeof this.input.update_data||null===this.input.update_data)throw new Error("update_data must be an object for UPDATE_TABLE_RECORD action")},r.validateDeleteTableRecordInput=function(){if(!this.input.record_id)throw new Error("record_id is required for DELETE_TABLE_RECORD action");if("string"!=typeof this.input.record_id)throw new Error("record_id must be a string for DELETE_TABLE_RECORD action");if(!this.input.table_id)throw new Error("table_id is required for DELETE_TABLE_RECORD action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for DELETE_TABLE_RECORD action")},e}(b),G=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"csv",action:e.action,input:e.input})||this}return i(e,t),e.prototype.validateInput=function(){var t,e,r,n,o,i,s,a,u,c;if(!Object.values(exports.CsvExcelActions).includes(this.action))throw new Error("Invalid action for CsvExcelNode: "+this.action);switch(this.action){case exports.CsvExcelActions.CSV_TO_JSON:if(null==(t=this.input)||!t.csv_file_url)throw new Error("csv_file_url is required in input for "+exports.CsvExcelActions.CSV_TO_JSON);break;case exports.CsvExcelActions.JSON_TO_CSV:if(null==(e=this.input)||!e.json_file_url)throw new Error("json_file_url is required in input for "+exports.CsvExcelActions.JSON_TO_CSV);break;case exports.CsvExcelActions.PARSE_CSV_TO_ARRAY:if(null==(r=this.input)||!r.csv_input)throw new Error("csv_input url is required in input for "+exports.CsvExcelActions.PARSE_CSV_TO_ARRAY);break;case exports.CsvExcelActions.ARRAY_OF_ROWS_TO_CSV:if(null==(n=this.input)||!n.rows)throw new Error("rows is required in input for "+exports.CsvExcelActions.ARRAY_OF_ROWS_TO_CSV);break;case exports.CsvExcelActions.JSON_TO_EXCEL:if(null==(o=this.input)||!o.json_file_url)throw new Error("json_file_url is required in input for "+exports.CsvExcelActions.JSON_TO_EXCEL);break;case exports.CsvExcelActions.JSON_DATA_TO_EXCEL:if(null==(i=this.input)||!i.json_data)throw new Error("json_data is required in input for "+exports.CsvExcelActions.JSON_DATA_TO_EXCEL);break;case exports.CsvExcelActions.CSV_TO_EXCEL:if(null==(s=this.input)||!s.csv_file_url)throw new Error("csv_file_url is required in input for "+exports.CsvExcelActions.CSV_TO_EXCEL);break;case exports.CsvExcelActions.MERGE_EXCEL_FILES:if(null==(a=this.input)||!a.excel_files)throw new Error("excel_files is required in input for "+exports.CsvExcelActions.MERGE_EXCEL_FILES);break;case exports.CsvExcelActions.WRITE_DATA_TO_FILE:if(null==(u=this.input)||!u.data)throw new Error("data is required in input for "+exports.CsvExcelActions.WRITE_DATA_TO_FILE);if(null==(c=this.input)||!c.file_format||!["csv","json","excel","text"].includes(this.input.file_format))throw new Error("file_format is required in input for "+exports.CsvExcelActions.WRITE_DATA_TO_FILE)}},e}(b),W=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"subflow",action:e.action,input:e.input})||this}return i(e,t),e.prototype.validateInput=function(){if(!this.input.workflow_id||"string"!=typeof this.input.workflow_id)throw new Error("Input must contain workflow_id as a string");if(void 0!==this.input.sync_execution&&"boolean"!=typeof this.input.sync_execution)throw new Error("Input must contain sync_execution as a boolean value");if(void 0!==this.input.wait_for_completion_for_async_execution&&"boolean"!=typeof this.input.wait_for_completion_for_async_execution)throw new Error("Input must contain wait_for_completion_for_async_execution as a boolean value");if(void 0!==this.input.payload&&"object"!=typeof this.input.payload)throw new Error("Input must contain payload as an object")},e}(b);exports.CodeExecutorNode=I,exports.CsvExcelNode=G,exports.DataMapperNode=j,exports.DataRefNode=q,exports.DelayNode=S,exports.EmailNode=F,exports.ExternalApp=N,exports.FileHandlerNode=B,exports.GroupNode=T,exports.HttpNode=O,exports.PDFNode=k,exports.ResponseNode=L,exports.RuleNode=y,exports.StartNode=C,exports.SubflowNode=W,exports.SwitchNode=R,exports.TableNode=P,exports.Workflow=m;
