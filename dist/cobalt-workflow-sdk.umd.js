!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t||self).cobaltWorkflowSdk={})}(this,function(t){function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a.apply(null,arguments)}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function d(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}function c(t){return t.replace(/\.(\d+)(?=\s|$|\.|\[|\}|\)|\,|\;|\'|\")/g,"[$1]").replace(/\.([a-zA-Z_$][^\.\[]*)/g,function(t,e){return e.includes(" ")||e.includes("(")||e.includes(")")||e.includes("-")?'["'+e+'"]':t})}function f(t,e){return void 0===e&&(e=""),0===t.length?"":e+(e?".":"")+t.join(".")}var _=[{name:"GroupArrayItem",description:"References to array items inside GroupNode callbacks",proxyMarker:"__isNodeRef",toJSON:function(t){var e=t,n=f(e.path.length>0&&"array_item"===e.path[0]?e.path.slice(1):e.path);return"{{node."+e.nodeId+".body.array_item"+(n?"."+n:"")+"}}"},jsonPattern:/\{\{node\.(\d+)\.body\.array_item(?:\.([^}]+))?\}\}/g,toCode:function(t,e){return null!=e&&e.inGroupCallback?{format:"variable",value:"item"+(t[2]?"."+c(t[2]):"")}:{format:"string",value:"{{node."+t[1]+".body.array_item"+(t[2]?"."+t[2]:"")+"}}"}},codePattern:/(?:\b(item)(?:\.([a-zA-Z0-9_.\[\]]+))?|\{\{node\.(\d+)\.body\.array_item(?:\.([a-zA-Z0-9_.\[\]]+))?\}\})/g,fromCode:function(t,e){return"item"===t[1]&&null!=e&&e.groupNodeId?"{{node."+e.groupNodeId+".body.array_item"+(t[2]?"."+t[2]:"")+"}}":t[3]?"{{node."+t[3]+".body.array_item"+(t[4]?"."+t[4]:"")+"}}":t[0]}},{name:"NodeReference",description:"References to other node outputs (e.g., node2.body.data)",proxyMarker:"__isNodeRef",toJSON:function(t){var e=t,n=f(e.path);return"{{node."+e.nodeId+".body"+(n?"."+n:"")+"}}"},jsonPattern:/\{\{node\.(\d+)\.body(?:\.([^}]+))?\}\}/g,toCode:function(t,e){var n=t[1],r=t[2];if(null!=e&&e.allNodes&&!e.allNodes.has(n)){if(e.inGroupCallback)return{format:"string",value:"{{node."+n+".body"+(r?"."+r:"")+"}}"};if(e.preserveUnresolved)return{format:"string",value:"/* Warning: node"+n+' not found */ "{{node.'+n+".body"+(r?"."+r:"")+'}}"'}}return{format:"variable",value:"node"+n+".body"+(r?"."+c(r):"")}},codePattern:/\bnode(\d+)\.body(?:\.([a-zA-Z0-9_.\[\]]+))?/g,fromCode:function(t){var e=t[2];return"{{node."+t[1]+".body"+(e?"."+e:"")+"}}"}},{name:"NodeMetadata",description:"References to node metadata (e.g., node2.status, node3.headers)",proxyMarker:"__isNodeRef",toJSON:function(t){var e=t,n=e.path[0],r=f(e.path.slice(1));return"{{node."+e.nodeId+"."+n+(r?"."+r:"")+"}}"},jsonPattern:/\{\{node\.(\d+)\.(status|headers|statusCode|error)(?:\.([^}]+))?\}\}/g,toCode:function(t){var e=t[3];return{format:"string",value:"{{node."+t[1]+"."+t[2]+(e?"."+e:"")+"}}"}},codePattern:/\{\{node\.(\d+)\.(status|headers|statusCode|error)(?:\.([a-zA-Z0-9_.\[\]]+))?\}\}/g,fromCode:function(t){var e=t[3];return"{{node."+t[1]+"."+t[2]+(e?"."+e:"")+"}}"}},{name:"EventReference",description:"References to start node event data",proxyMarker:"__isEventRef",toJSON:function(t){return"{{"+t.path.join(".")+"}}"},jsonPattern:/\{\{event(?:\.body)?(?:\.([^}]+))?\}\}/g,toCode:function(t){var e=t[1];return{format:"string",value:"{{event.body"+(e?"."+e:"")+"}}"}},codePattern:/\{\{event(?:\.body)?(?:\.([a-zA-Z0-9_.\[\]]+))?\}\}/g,fromCode:function(t){var e=t[1];return"{{event.body"+(e?"."+e:"")+"}}"}},{name:"ApplicationConfig",description:"Application-level configuration fields",proxyMarker:"__isConfigRef",toJSON:function(t){var e=f(t.path);return"{{application.fields"+(e?"."+e:"")+"}}"},jsonPattern:/\{\{application\.fields(?:\.([^}]+))?\}\}/g,toCode:function(t){var e=t[1];return{format:"variable",value:"RefoldConfig.APPLICATION"+(e?"."+e:"")}},codePattern:/\bRefoldConfig\.APPLICATION(?:\.([a-zA-Z0-9_]+))?/g,fromCode:function(t){var e=t[1];return"{{application.fields"+(e?"."+e:"")+"}}"}},{name:"WorkflowConfig",description:"Workflow-level configuration fields",proxyMarker:"__isConfigRef",toJSON:function(t){var e=f(t.path);return"{{workflow.fields"+(e?"."+e:"")+"}}"},jsonPattern:/\{\{workflow\.fields(?:\.([^}]+))?\}\}/g,toCode:function(t){var e=t[1];return{format:"variable",value:"RefoldConfig.WORKFLOW"+(e?"."+e:"")}},codePattern:/\bRefoldConfig\.WORKFLOW(?:\.([a-zA-Z0-9_]+))?/g,fromCode:function(t){var e=t[1];return"{{workflow.fields"+(e?"."+e:"")+"}}"}},{name:"RuntimeInstanceMetadata",description:"Instance metadata available at runtime (instance_id, timestamps, etc.)",proxyMarker:"__isInstanceRef",toJSON:function(t){var e=f(t.path);return"{{instance_meta_data"+(e?"."+e:"")+"}}"},jsonPattern:/\{\{instance_meta_data(?:\.([^}]+))?\}\}/g,toCode:function(t){var e=t[1];return{format:"string",value:"{{instance_meta_data"+(e?"."+e:"")+"}}"}},codePattern:/\{\{instance_meta_data(?:\.([a-zA-Z0-9_]+))?\}\}/g,fromCode:function(t){var e=t[1];return"{{instance_meta_data"+(e?"."+e:"")+"}}"}},{name:"RuntimeEnvironment",description:"Runtime environment variables (config_store, workflow_store, linked_account)",proxyMarker:"__isEnvRef",toJSON:function(t){var e=t,n=f(e.path);return"{{env."+e.envType+(n?"."+n:"")+"}}"},jsonPattern:/\{\{env\.(config_store|workflow_store|linked_account|global_store)(?:\.([^}]+))?\}\}/g,toCode:function(t){var e=t[2];return{format:"string",value:"{{env."+t[1]+(e?"."+e:"")+"}}"}},codePattern:/\{\{env\.(config_store|workflow_store|linked_account|global_store)(?:\.([a-zA-Z0-9_.\[\]"']+))?\}\}/g,fromCode:function(t){var e=t[2];return"{{env."+t[1]+(e?"."+e:"")+"}}"}}];function l(t){return _.find(function(e){return e.proxyMarker===t})}function p(t){if(t&&"object"==typeof t){if(t.__isNodeRef){var e=t.path&&t.path.length>0&&"array_item"===t.path[0]?"GroupArrayItem":"NodeReference",n=_.find(function(t){return t.name===e});if(n)return n.toJSON(t)}if(t.__isEventRef){var r=l("__isEventRef");if(r)return r.toJSON(t)}if(t.__isConfigRef){var o=l("__isConfigRef");if(o)return o.toJSON(t)}if(t.__isEnvRef){var i=l("__isEnvRef");if(i)return i.toJSON(t)}if(t.__isInstanceRef){var a=l("__isInstanceRef");if(a)return a.toJSON(t)}if(t.__isTemplateRef&&t.template)return t.template;if(Array.isArray(t))return t.map(p);if(t.constructor===Object){for(var s={},u=0,d=Object.keys(t);u<d.length;u++){var c=d[u];s[c]=p(t[c])}return s}}return t}function h(t,e){var n;void 0===e&&(e=[]);var r="{{node."+t+".body"+(e.length>0?"."+e.join("."):"")+"}}",o=((n={__isNodeRef:!0,nodeId:t,path:e,toString:function(){return r},valueOf:function(){return r}})[Symbol.toPrimitive]=function(){return r},n[Symbol.toStringTag]="NodeRef",n);return new Proxy(o,{get:function(n,r){return r in n?n[r]:"string"==typeof r||"number"==typeof r?h(t,[].concat(e,[String(r)])):void 0}})}var E,v,m,y,A,b,w,g,R=[],T=/*#__PURE__*/function(){function t(e){if(this.id=void 0,this.slug=void 0,this.action=void 0,this.input=void 0,this.next_node=[],this._next_refs=[],this._parent_node=null,this.name=void 0,this.description=void 0,e.id){this.id=e.id;var n=parseInt(e.id,10);!isNaN(n)&&n>=t._counter&&(t._counter=n+1)}else this.id=String(t._counter++);this.slug=e.slug,this.action=e.action,this.input=p(e.input),this.name=e.name,this.description=e.description;var r=t.getCurrentForLoopContext();console.log("[BaseNode] Creating "+this.slug+":"+this.id+", context:",(null==r?void 0:r.id)||"none",", counter:",t._counter),r&&(r.addToForLoop(this),console.log("[BaseNode] Added "+this.slug+":"+this.id+" to GroupNode "+r.id))}var e=t.prototype;return e.next=function(t){return this.next_node.push(t.id),this._next_refs.push(t),t},e.setParentNode=function(t){this._parent_node=t},t.pushForLoopContext=function(t){R.push(t)},t.popForLoopContext=function(){return R.pop()},t.getCurrentForLoopContext=function(){return R.length>0?R[R.length-1]:null},t.clearForLoopContext=function(){R=[]},e.validateInput=function(){},o(t,[{key:"nextRefs",get:function(){return this._next_refs}},{key:"parentNode",get:function(){return this._parent_node}},{key:"parent_node",get:function(){return this._parent_node?this._parent_node.id:null}},{key:"body",get:function(){return h(this.id,[])}}])}();T._counter=1,t.Actions=void 0,(E=t.Actions||(t.Actions={})).no_action="no_action",E.http_request="httprequest",t.DelayActions=void 0,(v=t.DelayActions||(t.DelayActions={})).WAIT_FOR="wait_for",v.WAIT_TILL="wait_till",t.FileHandlerActions=void 0,(t.FileHandlerActions||(t.FileHandlerActions={})).UPLOAD_FILE_TO_BUCKET_FROM_URL="upload_file_to_bucket_from_url",t.TableActions=void 0,(m=t.TableActions||(t.TableActions={})).CREATE_TABLE="create_table",m.DELETE_TABLE="delete_table",m.GET_TABLES="get_tables",m.ADD_TABLE_RECORD="add_table_record",m.SEARCH_TABLE_RECORDS="search_table_records",m.GET_TABLE_RECORDS="get_table_records",m.UPDATE_TABLE_RECORD="update_table_record",m.DELETE_TABLE_RECORD="delete_table_record",t.PDFActions=void 0,(y=t.PDFActions||(t.PDFActions={})).CREATE_PDF_FROM_HTML="create_pdf_from_html",y.MERGE_PDFS="merge_pdfs",t.DataRefActions=void 0,(A=t.DataRefActions||(t.DataRefActions={})).CREATE_REF="create_ref",A.CREATE_BULK_REF="create_bulk_ref",A.GET_REF_BY_RECORD_ID="get_ref_by_record_id",A.GET_REF_BY_EXTERNAL_ID="get_ref_by_external_id",A.DELETE_REF_BY_RECORD_ID="delete_ref_by_record_id",t.CsvExcelActions=void 0,(b=t.CsvExcelActions||(t.CsvExcelActions={})).CSV_TO_JSON="csv_to_json",b.JSON_TO_CSV="json_to_csv",b.PARSE_CSV_TO_ARRAY="parse_csv_to_array",b.ARRAY_OF_ROWS_TO_CSV="array_of_rows_to_csv",b.JSON_TO_EXCEL="json_to_excel",b.JSON_DATA_TO_EXCEL="json_data_to_excel",b.CSV_TO_EXCEL="csv_to_excel",b.MERGE_EXCEL_FILES="merge_excel_files",b.WRITE_DATA_TO_FILE="write_data_to_file",b.JSON_TO_X12_EDI="json_to_x12_edi",b.X12_EDI_TO_JSON="x12_edi_to_json",b.CXML_TO_JSON="cxml_to_json",b.JSON_TO_CXML="json_to_cxml",t.StartNodeTrigger=void 0,(w=t.StartNodeTrigger||(t.StartNodeTrigger={})).API_CALL="api_call",w.CRON="cron",w.EVENT="event",t.GroupActions=void 0,(g=t.GroupActions||(t.GroupActions={})).ArrayIteration="array_iteration",g.FixedIteration="fixed_iteration";var C=/*#__PURE__*/function(e){function n(n){var r;return(r=e.call(this,{slug:"rule",action:t.Actions.no_action,input:n.input,name:n.name,description:n.description,id:n.id})||this)._true_refs=[],r._false_refs=[],r.true_node=[],r.false_node=[],r}s(n,e);var r=n.prototype;return r.next=function(t){throw new Error("RuleNode is a branching node. Use .trueNext() or .falseNext() instead of .next()")},r.trueNext=function(t){if(this._true_refs.some(function(e){return e===t}))throw new Error("Duplicate node detected in true branch. Node is already included.");if(this._false_refs.some(function(e){return e===t}))throw new Error("Node is already included in the false branch. Cannot add it to the true branch.");return this.true_node.push(t.id),this._true_refs.push(t),t},r.falseNext=function(t){if(this._false_refs.some(function(e){return e===t}))throw new Error("Duplicate node detected in false branch. Node is already included.");if(this._true_refs.some(function(e){return e===t}))throw new Error("Node is already included in the true branch. Cannot add it to the false branch.");return this.false_node.push(t.id),this._false_refs.push(t),t},r.validateInput=function(){if(0===this.true_node.length&&0===this.false_node.length)throw new Error("RuleNode must have at least one true or false branch defined")},o(n,[{key:"trueRefs",get:function(){return this._true_refs}},{key:"falseRefs",get:function(){return this._false_refs}}])}(T),O=[],D=/*#__PURE__*/function(t){function e(e){var n,r=e.input;return(n=t.call(this,{slug:"group",action:e.iteration_type,input:r,name:e.name,description:e.description,id:e.id})||this)._entry_node_ref=null,n.entry_node=null,n._group_nodes=new Map,n._for_loop_nodes=[],n._is_in_for_loop=!1,n._callback_fn=void 0,n._output_data=void 0,O.push(n),n._callback_fn=r.callback_fn,n._output_data=r.output_data,n}s(e,t);var n=e.prototype;return n.executeCallback=function(){var t;if(this._callback_fn){console.log("[GroupNode "+this.id+"] Executing callback..."),this.startForLoopContext(),T.pushForLoopContext(this),console.log("[GroupNode "+this.id+"] Context stack after push:",null==(t=T.getCurrentForLoopContext())?void 0:t.id);var e=this.id,n=function(t){return new Proxy({__isTemplateRef:!0,template:"{{node."+e+".body.array_item"+(t?"."+t:"")+"}}"},{get:function(e,r){return"__isNodeRef"!==r&&"__isEventRef"!==r&&"__isConfigRef"!==r&&"__isEnvRef"!==r&&"__isInstanceRef"!==r&&("__isTemplateRef"===r||("template"===r?e.template:"toString"===r||"valueOf"===r||"toJSON"===r||r===Symbol.toPrimitive?function(){return e.template}:"string"==typeof r?n(t?t+"."+r:r):void 0))}})},r=n("");try{this._callback_fn(r),console.log("[GroupNode "+this.id+"] Callback executed. For loop nodes count:",this._for_loop_nodes.length),console.log("[GroupNode "+this.id+"] For loop node IDs:",this._for_loop_nodes.map(function(t){return t.slug+":"+t.id}))}catch(t){console.error("[GroupNode "+this.id+"] Error executing callback:",t)}T.popForLoopContext(),this.endForLoopContext()}else console.log("[GroupNode "+this.id+"] No callback function found")},e.getAllGroupNodes=function(){return[].concat(O)},e.clearRegistry=function(){O.length=0},n.setEntryNode=function(t){this._entry_node_ref=t,this.entry_node=t.id},n.next=function(e){return e.id.includes(".")?this:t.prototype.next.call(this,e)},n.startForLoopContext=function(){this._is_in_for_loop=!0,this._for_loop_nodes=[]},n.endForLoopContext=function(){this._is_in_for_loop=!1},n.trackForLoopNode=function(t){this._is_in_for_loop&&this._for_loop_nodes.push(t)},n.addForLoopNode=function(t){this._for_loop_nodes.push(t)},n.processForLoopNodes=function(){var t=this;if(0!==this._for_loop_nodes.length){console.log("[GroupNode "+this.id+"] Processing "+this._for_loop_nodes.length+" for loop nodes");var e=new Map;this._for_loop_nodes.forEach(function(n,r){var o=n.id;t._group_nodes.set(o,n),e.set(o,o),console.log("[GroupNode "+t.id+"] Added "+n.slug+":"+o+" to group_nodes")}),this._for_loop_nodes.forEach(function(n){t.processNodeInput(n,null,0),t.reResolveTemplates(n,e)}),this._for_loop_nodes.forEach(function(t){Array.isArray(t.next_node)&&(t.next_node=t.next_node.map(function(t){return e.get(t)||t})),"true_node"in t&&Array.isArray(t.true_node)&&(t.true_node=t.true_node.map(function(t){return e.get(t)||t})),"false_node"in t&&Array.isArray(t.false_node)&&(t.false_node=t.false_node.map(function(t){return e.get(t)||t}))});var n=this._for_loop_nodes[0];n&&this.setEntryNode(n),this._for_loop_nodes=[]}},n.addToForLoop=function(t){t.setParentNode(this),this._for_loop_nodes.push(t)},n.processNodeInput=function(t,e,n){t.input&&"object"==typeof t.input&&(t.input=this.keepTemplatesAsIs(t.input))},n.keepTemplatesAsIs=function(t){var e=this;if(t&&"object"==typeof t){if("string"==typeof t)return this.replaceArrayItemInString(t,null,0);if(Array.isArray(t))return t.map(function(t){return e.keepTemplatesAsIs(t)});if(t.constructor===Object){for(var n={},r=0,o=Object.keys(t);r<o.length;r++){var i=o[r];n[i]=this.keepTemplatesAsIs(t[i])}return n}}return t},n.replaceArrayItemInString=function(t,e,n){var r=this;return t.replace(/\bitem\.([a-zA-Z0-9_.\[\]]+)\b/g,function(t,e){return"{{node."+r.id+".body.array_item."+e+"}}"}).replace(/\barray_item\.([a-zA-Z0-9_.\[\]]+)\b/g,function(t,e){return"{{node."+r.id+".body.array_item."+e+"}}"})},n.reResolveTemplates=function(t,e){t.input&&"object"==typeof t.input&&(t.input=this.reResolveTemplatesInObject(t.input,e))},n.reResolveTemplatesInObject=function(t,e){var n=this;if(t&&"object"==typeof t){if(Array.isArray(t))return t.map(function(t){return n.reResolveTemplatesInObject(t,e)});if(t.constructor===Object){for(var r={},o=0,i=Object.keys(t);o<i.length;o++){var a=i[o];r[a]=this.reResolveTemplatesInObject(t[a],e)}return r}}else if("string"==typeof t)return this.reResolveTemplatesInString(t,e);return t},n.reResolveTemplatesInString=function(t,e){return t.replace(/\{\{node\.(\d+)\./g,function(t,n){var r=e.get(n);return r?"{{node."+r+".":t})},o(e,[{key:"callback_fn",get:function(){return this._callback_fn}},{key:"output_data",get:function(){return this._output_data}},{key:"entryNode",get:function(){return this._entry_node_ref}},{key:"groupNodes",get:function(){return Array.from(this._group_nodes.values())}}])}(T),N=/*#__PURE__*/function(e){function n(n){var r;return(r=e.call(this,{slug:"switch_case",action:t.Actions.no_action,input:n.input,name:n.name,description:n.description,id:n.id})||this)._cases=new Map,r._caseRefs=new Map,r._defaultCase=[],r._defaultRefs=[],r}s(n,e);var r=n.prototype;return r.next=function(t){throw new Error("SwitchNode is a branching node. Use .addCase() or .setDefault() instead of .next()")},r.addCase=function(t,e){var n=this;return this._cases.has(t)||(this._cases.set(t,[]),this._caseRefs.set(t,[])),(Array.isArray(e)?e:[e]).forEach(function(e){if(n._caseRefs.get(t).some(function(t){return t===e}))throw new Error("Duplicate node detected in case '"+t+"'. Node is already included in this case.");if(n._defaultRefs.some(function(t){return t===e}))throw new Error("Node is already included in the default case. Cannot add it to case '"+t+"'.");for(var r,o=i(n._caseRefs.entries());!(r=o()).done;){var a=r.value,s=a[0];if(s!==t&&a[1].some(function(t){return t===e}))throw new Error("Node is already included in case '"+s+"'. Cannot add it to case '"+t+"'.")}n._cases.get(t).push(e.id),n._caseRefs.get(t).push(e)}),this},r.setDefault=function(t){var e=this;return(Array.isArray(t)?t:[t]).forEach(function(t){if(e._defaultRefs.some(function(e){return e===t}))throw new Error("Duplicate node detected in default case. Node is already included.");for(var n,r=i(e._caseRefs.entries());!(n=r()).done;){var o=n.value,a=o[0];if(o[1].some(function(e){return e===t}))throw new Error("Node is already included in case '"+a+"'. Cannot add it to the default case.")}e._defaultCase.push(t.id),e._defaultRefs.push(t)}),this},r.validateInput=function(){if(!this.input.switch_value)throw new Error("Input must contain switch_value for SwitchNode");if(0===this._cases.size&&0===this._defaultCase.length)throw new Error("SwitchNode must have at least one case or default case defined")},o(n,[{key:"cases",get:function(){return Array.from(this._cases.keys())}},{key:"caseRefs",get:function(){return this._caseRefs}},{key:"defaultRefs",get:function(){return this._defaultRefs}},{key:"casesForSerialization",get:function(){var t={};return this._cases.forEach(function(e,n){t[n]=e}),t}},{key:"defaultCase",get:function(){return this._defaultCase}}])}(T),L=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:e.application_slug,action:e.action,input:e.input,name:e.name,description:e.description,id:e.id})||this}return s(e,t),e}(T),x=/*#__PURE__*/function(){function t(){this.startNode=void 0}var e=t.prototype;return e.trigger=function(t){this.startNode=t},e.build=function(){if(!this.startNode)throw new Error("No start node set. Use trigger(startNode)");if(void 0===this.startNode.input.trigger_type)throw new Error("StartNode trigger_type cannot be undefined");T.clearForLoopContext();var t=[],e=new Set;!function n(r,o){if(void 0===o&&(o=[]),r){if(o.includes(r.id))throw new Error("Infinite loop detected in workflow at node id: "+r.id+" (path: "+[].concat(o,[r.id]).join(" -> ")+")");if(e.has(r.id)||(t.push(r),e.add(r.id)),r instanceof D&&r.entryNode&&n(r.entryNode,[].concat(o,[r.id])),r instanceof C){for(var a,s=i(r.trueRefs);!(a=s()).done;)n(a.value,[].concat(o,[r.id]));for(var u,d=i(r.falseRefs);!(u=d()).done;)n(u.value,[].concat(o,[r.id]))}if(r instanceof N){for(var c,f=i(r.caseRefs.values());!(c=f()).done;)for(var _,l=i(c.value);!(_=l()).done;)n(_.value,[].concat(o,[r.id]));for(var p,h=i(r.defaultRefs);!(p=h()).done;)n(p.value,[].concat(o,[r.id]))}for(var E,v=i(r.nextRefs||[]);!(E=v()).done;)n(E.value,[].concat(o,[r.id]))}}(this.startNode),this.processAllGroupNodes(t);var n=D.getAllGroupNodes(),r=new Set(t.filter(function(t){return t instanceof D}).map(function(t){return t.id}));n.forEach(function(e){r.has(e.id)||t.push(e)});var o=new Set;return n.forEach(function(t){t.groupNodes&&t.groupNodes.forEach(function(t){o.add(t.id)})}),n.forEach(function(e){e.groupNodes&&e.groupNodes.forEach(function(e){t.some(function(t){return t.id===e.id})||t.push(e)})}),t.map(function(t){var e={id:t.id,name:t.name,description:t.description,slug:t.slug,action:t.action,input:t.input,next_node:t.next_node,parent_node:t.parent_node};if(t instanceof C)return a({},e,{true_nodes:t.true_node,false_nodes:t.false_node,next_node:[].concat(t.true_node,t.false_node)});if(t instanceof L){if(null==t||!t.slug)throw new Error("ExternalApp slug cannot be undefined");return a({},e)}if(t instanceof N)return a({},e,{cases:t.casesForSerialization,default_case:t.defaultCase,next_node:[].concat(Object.values(t.casesForSerialization).flat(),t.defaultCase)});if(t instanceof D){var n=a({},e.input);return t.output_data&&(n.output_data=t.output_data),a({},e,{input:n,entry_node:t.entry_node,group_nodes:t.groupNodes.map(function(t){return t.id})})}return e})},e.processAllGroupNodes=function(t){var e=D.getAllGroupNodes();console.log("[Workflow] Processing "+e.length+" GroupNodes:",e.map(function(t){return t.id})),e.forEach(function(t,n){var r,o;console.log("[Workflow] Processing GroupNode "+t.id+" ("+(n+1)+"/"+e.length+"), has callback:",!!t.callback_fn),t.callback_fn?(t.executeCallback(),console.log("[Workflow] GroupNode "+t.id+" callback executed, for_loop_nodes count:",(null==(o=t._for_loop_nodes)?void 0:o.length)||0)):console.log("[Workflow] GroupNode "+t.id+" has no callback_fn, skipping executeCallback"),t.processForLoopNodes(),console.log("[Workflow] GroupNode "+t.id+" processed, group_nodes count:",(null==(r=t.groupNodes)?void 0:r.length)||0)})},e.printMermaid=function(){for(var t,e=this.build(),n="flowchart TD\n",r=e.reduce(function(t,e){var n=(e.name||e.slug)+" ("+e.id+")";if("entry_node"in e&&e.entry_node&&(n="Group: "+(e.name||e.slug)+" ("+e.id+")"),e.id.includes(".")){var r=e.id.split(".");r.length>=3&&(n=(e.name||e.slug)+" ["+r[1]+"] ("+e.id+")")}return t[e.id]=n,t},{}),o=function(){var o=t.value,i="";"entry_node"in o&&o.entry_node?i=e.some(function(t){return"group_nodes"in t&&Array.isArray(t.group_nodes)&&t.group_nodes.includes(o.id)})?":::nestedGroupNode":":::groupNode":o.id.includes(".")&&(i=":::groupChildNode"),n+="  "+o.id+'["'+r[o.id]+'"]'+i+"\n"},a=i(e);!(t=a()).done;)o();for(var s,u=function(){var t=s.value;if(Array.isArray(t.next_node))for(var r,o=function(){var o=r.value;e.some(function(t){return t.id===o})&&(n+="  "+t.id+" --\x3e "+o+"\n")},a=i(t.next_node);!(r=a()).done;)o();if("truth_node"in t&&Array.isArray(t.truth_node))for(var u,d=function(){var r=u.value;e.some(function(t){return t.id===r})&&(n+="  "+t.id+" --|truth|--\x3e "+r+"\n")},c=i(t.truth_node);!(u=c()).done;)d();if("falsy_node"in t&&Array.isArray(t.falsy_node))for(var f,_=function(){var r=f.value;e.some(function(t){return t.id===r})&&(n+="  "+t.id+" --|falsy|--\x3e "+r+"\n")},l=i(t.falsy_node);!(f=l()).done;)_();"entry_node"in t&&t.entry_node&&e.some(function(e){return e.id===t.entry_node})&&(n+="  "+t.id+" -.-> "+t.entry_node+"\n")},d=i(e);!(s=d()).done;)u();for(var c,f=i(e);!(c=f()).done;){var _=c.value;if("group_nodes"in _&&Array.isArray(_.group_nodes))for(var l,p=function(){var t=l.value,r=e.find(function(e){return e.id===t});r&&"entry_node"in r&&(n+="  "+_.id+" -.->|nested| "+t+"\n")},h=i(_.group_nodes);!(l=h()).done;)p()}return n+="\n  classDef groupNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px\n",n+="  classDef nestedGroupNode fill:#fff3e0,stroke:#f57c00,stroke-width:2px\n",n+="  classDef groupChildNode fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px\n"},t}();function I(t){void 0===t&&(t=[]);var e={__isEventRef:!0,path:["event"].concat(t)};return new Proxy(e,{get:function(e,n){return"string"!=typeof n||n in e?e[n]:I([].concat(t,[n]))}})}var S,k,F=/*#__PURE__*/function(e){function n(n){var r=n.event,o=n.cron_expression,i=n.api_call_payload,a=n.id,s={trigger_type:n.trigger_type};return void 0!==r&&(s.event=r),void 0!==o&&(s.cron_expression=o),void 0!==i&&(s.api_call_payload=i),e.call(this,{slug:"start",action:t.Actions.no_action,input:s,id:a})||this}return s(n,e),o(n,[{key:"event",get:function(){return I([])}}])}(T),j=/*#__PURE__*/function(e){function n(n){return e.call(this,{slug:"httpinternal",action:t.Actions.http_request,input:n.input,name:n.name,description:n.description,id:n.id})||this}return s(n,e),n}(T),P=/*#__PURE__*/function(e){function n(n){return e.call(this,{slug:"response",action:t.Actions.no_action,input:n.input||{},name:n.name,description:n.description,id:n.id})||this}return s(n,e),n}(T),B=/*#__PURE__*/function(e){function r(r){var o,i=r.input,a=void 0===i?{parameters:{},function:""}:i,s=r.name,u=r.description,d=r.id,c=a.parameters,f=a.function,_=void 0===f?"":f;if("string"==typeof _)return(o=e.call(this,{slug:"codeexecutornode",action:t.Actions.no_action,input:{parameters:c,function:_},name:s,description:u,id:d})||this)._codeFunction=void 0,o._codeFunction=_,n(o);var l,p=_.toString();if(p.includes("=>")){var h=p.indexOf("=>"),E=p.substring(0,h).trim(),v=p.substring(h+2).trim(),m=E.match(/^\(([^)]+)\)$/),y=m?m[1]:E.replace(/^\(|\)$/g,"");l=v.startsWith("{")&&v.endsWith("}")?"function yourFunction("+y+") {\n  "+v.slice(1,-1).trim()+"\n}":"function yourFunction("+y+") {\n  return "+v+";\n}"}else l=p.replace(/^function\s+\w+\s*\(/,"function yourFunction(");return(o=e.call(this,{slug:"codeexecutornode",action:t.Actions.no_action,input:{parameters:c,function:l},name:s,description:u,id:d})||this)._codeFunction=void 0,o._codeFunction=_,n(o)}return s(r,e),o(r,[{key:"codeFunction",get:function(){return this._codeFunction}}])}(T);t.Operators=void 0,(S=t.Operators||(t.Operators={})).eq="eq",S.neq="neq",S.gt="gt",S.gte="gte",S.lt="lt",S.lte="lte",S.in="in",S.nin="nin",S.contains="contains",S.not_contains="not_contains",S.exist="exist",S.not_exist="not_exist",S.is_null="is_null",S.not_null="not_null",t.Operations=void 0,(k=t.Operations||(t.Operations={})).AND="and",k.OR="or";var G=/*#__PURE__*/function(e){function n(t){return e.call(this,{slug:"delay",action:t.action,input:t.input,name:t.name,description:t.description,id:t.id})||this}s(n,e);var r=n.prototype;return r.validateInput=function(){if(!Object.values(t.DelayActions).includes(this.action))throw new Error("Invalid action for DelayNode: "+this.action);this.action===t.DelayActions.WAIT_FOR?this.validateWaitForInput():this.action===t.DelayActions.WAIT_TILL&&this.validateWaitTillInput()},r.validateWaitForInput=function(){if(void 0!==this.input.days&&("number"!=typeof this.input.days||this.input.days<0||this.input.days>30))throw new Error("days must be a number between 0 and 30 for "+t.DelayActions.WAIT_FOR);if(void 0!==this.input.hours&&("number"!=typeof this.input.hours||this.input.hours<0||this.input.hours>23))throw new Error("hours must be a number between 0 and 23 for "+t.DelayActions.WAIT_FOR);if(void 0!==this.input.minutes&&("number"!=typeof this.input.minutes||this.input.minutes<0||this.input.minutes>59))throw new Error("minutes must be a number between 0 and 59 for "+t.DelayActions.WAIT_FOR);if(void 0!==this.input.seconds&&("number"!=typeof this.input.seconds||this.input.seconds<0||this.input.seconds>59))throw new Error("seconds must be a number between 0 and 59 for "+t.DelayActions.WAIT_FOR);if(!(this.input.days||this.input.hours||this.input.minutes||this.input.seconds))throw new Error("At least one time unit (days, hours, minutes, or seconds) must be provided for "+t.DelayActions.WAIT_FOR)},r.validateWaitTillInput=function(){if(void 0!==this.input.days&&("number"!=typeof this.input.days||this.input.days<0||this.input.days>30))throw new Error("days must be a number between 0 and 30 for "+t.DelayActions.WAIT_TILL);if(void 0!==this.input.hours&&("number"!=typeof this.input.hours||this.input.hours<0||this.input.hours>23))throw new Error("hours must be a number between 0 and 23 for "+t.DelayActions.WAIT_TILL);if(void 0!==this.input.minutes&&("number"!=typeof this.input.minutes||this.input.minutes<0||this.input.minutes>59))throw new Error("minutes must be a number between 0 and 59 for "+t.DelayActions.WAIT_TILL);if(void 0!==this.input.seconds&&("number"!=typeof this.input.seconds||this.input.seconds<0||this.input.seconds>59))throw new Error("seconds must be a number between 0 and 59 for "+t.DelayActions.WAIT_TILL);if(void 0!==this.input.before_or_after&&"+"!==this.input.before_or_after&&"-"!==this.input.before_or_after)throw new Error("before_or_after must be either '+' or '-' for "+t.DelayActions.WAIT_TILL);if(void 0!==this.input.base_date){if("string"!=typeof this.input.base_date)throw new Error("base_date must be a string for "+t.DelayActions.WAIT_TILL);var e=this.input.base_date;if(![/^\d{4}-\d{2}-\d{2}$/,/^\d{4}\/\d{2}\/\d{2}$/,/^\d{2}\/\d{2}\/\d{4}$/].some(function(t){return t.test(e)}))throw new Error("base_date must be in valid JS Date format (ISO format, YYYY/MM/DD, MM/DD/YYYY) for "+t.DelayActions.WAIT_TILL+". 'DD/MM/YYYY' is not a valid JS Date format.");var n=new Date(e);if(isNaN(n.getTime()))throw new Error("base_date must be a valid date for "+t.DelayActions.WAIT_TILL)}if(!(this.input.days||this.input.hours||this.input.minutes||this.input.seconds))throw new Error("At least one time unit (days, hours, minutes, or seconds) must be provided for "+t.DelayActions.WAIT_TILL)},n}(T),M=/*#__PURE__*/function(e){function n(n){return e.call(this,{slug:"email",action:t.Actions.no_action,input:n.input,name:n.name,description:n.description,id:n.id})||this}return s(n,e),n.prototype.validateInput=function(){if(!this.input.host||!this.input.port||!this.input.user||!this.input.pass||!0!==this.input.secure&&!1!==this.input.secure)throw new Error("Input must contain host, port, user, pass, and secure for EmailNode");if(this.input.secure&&465!==this.input.port&&587!==this.input.port)throw new Error("Input port must be 465 or 587 when secure is true for EmailNode");if(!(this.input.from&&this.input.to&&this.input.subject&&this.input.body))throw new Error("Input must contain from, to, subject, and body for EmailNode")},n}(T),q=/*#__PURE__*/function(e){function n(n){return e.call(this,{slug:"file_handler",action:n.action||t.FileHandlerActions.UPLOAD_FILE_TO_BUCKET_FROM_URL,input:n.input,name:n.name,description:n.description,id:n.id})||this}return s(n,e),n.prototype.validateInput=function(){if(!this.input.source_url)throw new Error("source_url is required");if(!this.input.destination_file_name)throw new Error("destination_file_name is required");if(!this.input.storage_provider)throw new Error("storage_provider is required");var t=["AWS","GCS","MINIO"];if(!t.includes(this.input.storage_provider))throw new Error("storage_provider must be one of: "+t.join(", "))},n}(T),W=/*#__PURE__*/function(e){function n(t){return e.call(this,{slug:"pdf",action:t.action,input:t.input,name:t.name,description:t.description,id:t.id})||this}return s(n,e),n.prototype.validateInput=function(){if(!Object.values(t.PDFActions).includes(this.action))throw new Error("Invalid action for PDFNode: "+this.action);if(this.action===t.PDFActions.CREATE_PDF_FROM_HTML&&(!this.input.html||"string"!=typeof this.input.html))throw new Error("Input must contain html as a string for CREATE_PDF_FROM_HTML action");if(!(this.action!==t.PDFActions.MERGE_PDFS||this.input.pdfs&&Array.isArray(this.input.pdfs)))throw new Error("Input must contain pdfs as an array for MERGE_PDFS action")},n}(T),J=/*#__PURE__*/function(e){function n(n){var r=n.input;return e.call(this,{slug:"data_mapper",action:t.Actions.no_action,input:{input:r.input,mapping:r.mapping,direction:r.direction},name:n.name,description:n.description})||this}return s(n,e),n.prototype.validateInput=function(){if(!this.input.input)throw new Error("input is required in input for DataMapperNode (Field You Want To Map)");if(!this.input.mapping)throw new Error("mapping is required in input for DataMapperNode (Mapping Of The Field You Want To Map)");if("right"!==this.input.direction&&"left"!==this.input.direction)throw new Error("direction is required in input for DataMapperNode (right or left)")},n}(T),Y=/*#__PURE__*/function(e){function n(t){return e.call(this,{slug:"dataref",action:t.action,input:t.input,name:t.name,description:t.description,id:t.id})||this}return s(n,e),n.prototype.validateInput=function(){if(!Object.values(t.DataRefActions).includes(this.action))throw new Error("Invalid action for DataRefNode: "+this.action);switch(this.action){case t.DataRefActions.CREATE_REF:if(!this.input.name||!this.input.record_id||!this.input.external_id)throw new Error("name, record_id, and external_id are required in input for "+t.DataRefActions.CREATE_REF);break;case t.DataRefActions.CREATE_BULK_REF:if(!this.input.name||!Array.isArray(this.input.refs)||0===this.input.refs.length||!this.input.refs.every(function(t){return t&&"object"==typeof t&&"string"==typeof t.record_id&&"string"==typeof t.external_id}))throw new Error("name and refs (array of {record_id, external_id}) are required in input for "+t.DataRefActions.CREATE_BULK_REF);break;case t.DataRefActions.GET_REF_BY_RECORD_ID:if(!this.input.name||!this.input.record_id)throw new Error("name and record_id are required in input for "+t.DataRefActions.GET_REF_BY_RECORD_ID);break;case t.DataRefActions.GET_REF_BY_EXTERNAL_ID:if(!this.input.name||!this.input.external_id)throw new Error("name and external_id are required in input for "+t.DataRefActions.GET_REF_BY_EXTERNAL_ID);break;case t.DataRefActions.DELETE_REF_BY_RECORD_ID:if(!this.input.name||!this.input.record_id)throw new Error("name and record_id are required in input for "+t.DataRefActions.DELETE_REF_BY_RECORD_ID)}},n}(T),X=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"tables",action:e.action,input:e.input,name:e.name,description:e.description,id:e.id})||this}s(e,t);var n=e.prototype;return n.validateInput=function(){},n.validateCreateTableInput=function(){if(!this.input.type)throw new Error("type is required for CREATE_TABLE action");if("string"!=typeof this.input.type)throw new Error("type must be a string for CREATE_TABLE action");if(!["persistent","non_persistent"].includes(this.input.type))throw new Error("type must be 'persistent' or 'non_persistent' for CREATE_TABLE action");if(!this.input.name)throw new Error("name is required for CREATE_TABLE action");if("string"!=typeof this.input.name)throw new Error("name must be a string for CREATE_TABLE action");if(!this.input.columns)throw new Error("columns is required for CREATE_TABLE action");if(!Array.isArray(this.input.columns))throw new Error("columns must be an array for CREATE_TABLE action");if(0===this.input.columns.length)throw new Error("columns array cannot be empty for CREATE_TABLE action");for(var t=0;t<this.input.columns.length;t++){var e=this.input.columns[t];if(!e.column_name||"string"!=typeof e.column_name)throw new Error("column "+(t+1)+" must have a valid column_name string for CREATE_TABLE action")}},n.validateDeleteTableInput=function(){if(!this.input.table_id)throw new Error("table_id is required for DELETE_TABLE action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for DELETE_TABLE action")},n.validateGetTablesInput=function(){if(!this.input.type)throw new Error("type is required for GET_TABLES action");if("string"!=typeof this.input.type)throw new Error("type must be a string for GET_TABLES action");if(!["persistent","non_persistent"].includes(this.input.type))throw new Error("type must be 'persistent' or 'non_persistent' for GET_TABLES action")},n.validateAddTableRecordInput=function(){if(!this.input.table_id)throw new Error("table_id is required for ADD_TABLE_RECORD action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for ADD_TABLE_RECORD action");if(!this.input.table)throw new Error("table is required for ADD_TABLE_RECORD action");if("string"!=typeof this.input.table)throw new Error("table must be a string for ADD_TABLE_RECORD action");if(!/^(persistent|non_persistent):.+/.test(this.input.table))throw new Error("table must be in format 'persistent:table_name' or 'non_persistent:table_name' for ADD_TABLE_RECORD action");if(!this.input.data)throw new Error("data is required for ADD_TABLE_RECORD action");if("object"!=typeof this.input.data||null===this.input.data)throw new Error("data must be an object for ADD_TABLE_RECORD action")},n.validateSearchTableRecordsInput=function(){if(!this.input.table_id)throw new Error("table_id is required for SEARCH_TABLE_RECORDS action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for SEARCH_TABLE_RECORDS action");if(!this.input.table)throw new Error("table is required for SEARCH_TABLE_RECORDS action");if("string"!=typeof this.input.table)throw new Error("table must be a string for SEARCH_TABLE_RECORDS action");if(!/^(persistent|non_persistent):.+/.test(this.input.table))throw new Error("table must be in format 'persistent:table_name' or 'non_persistent:table_name' for SEARCH_TABLE_RECORDS action");if(!this.input.data)throw new Error("data is required for SEARCH_TABLE_RECORDS action");if("object"!=typeof this.input.data||null===this.input.data)throw new Error("data must be an object for SEARCH_TABLE_RECORDS action");if(!this.input.data.record_id&&!this.input.data.column_name)throw new Error("data must contain either record_id or column_name for SEARCH_TABLE_RECORDS action")},n.validateGetTableRecordsInput=function(){if(!this.input.table_id)throw new Error("table_id is required for GET_TABLE_RECORDS action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for GET_TABLE_RECORDS action")},n.validateUpdateTableRecordInput=function(){if(!this.input.record_id)throw new Error("record_id is required for UPDATE_TABLE_RECORD action");if("string"!=typeof this.input.record_id)throw new Error("record_id must be a string for UPDATE_TABLE_RECORD action");if(!this.input.table)throw new Error("table is required for UPDATE_TABLE_RECORD action");if("string"!=typeof this.input.table)throw new Error("table must be a string for UPDATE_TABLE_RECORD action");if(!/^(persistent|non_persistent):.+/.test(this.input.table))throw new Error("table must be in format 'persistent:table_name' or 'non_persistent:table_name' for UPDATE_TABLE_RECORD action");if(!this.input.table_id)throw new Error("table_id is required for UPDATE_TABLE_RECORD action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for UPDATE_TABLE_RECORD action");if(!this.input.update_data)throw new Error("update_data is required for UPDATE_TABLE_RECORD action");if("object"!=typeof this.input.update_data||null===this.input.update_data)throw new Error("update_data must be an object for UPDATE_TABLE_RECORD action")},n.validateDeleteTableRecordInput=function(){if(!this.input.record_id)throw new Error("record_id is required for DELETE_TABLE_RECORD action");if("string"!=typeof this.input.record_id)throw new Error("record_id must be a string for DELETE_TABLE_RECORD action");if(!this.input.table_id)throw new Error("table_id is required for DELETE_TABLE_RECORD action");if("string"!=typeof this.input.table_id)throw new Error("table_id must be a string for DELETE_TABLE_RECORD action")},e}(T),U=/*#__PURE__*/function(e){function n(t){return e.call(this,{slug:"csv",action:t.action,input:t.input,name:t.name,description:t.description,id:t.id})||this}return s(n,e),n.prototype.validateInput=function(){var e,n,r,o,i,a,s,u,d,c,f,_,l,p;if(!Object.values(t.CsvExcelActions).includes(this.action))throw new Error("Invalid action for CsvExcelNode: "+this.action);switch(this.action){case t.CsvExcelActions.CSV_TO_JSON:if(null==(e=this.input)||!e.csv_file_url)throw new Error("csv_file_url is required in input for "+t.CsvExcelActions.CSV_TO_JSON);break;case t.CsvExcelActions.JSON_TO_CSV:if(null==(n=this.input)||!n.json_file_url)throw new Error("json_file_url is required in input for "+t.CsvExcelActions.JSON_TO_CSV);break;case t.CsvExcelActions.PARSE_CSV_TO_ARRAY:if(null==(r=this.input)||!r.csv_input)throw new Error("csv_input url is required in input for "+t.CsvExcelActions.PARSE_CSV_TO_ARRAY);break;case t.CsvExcelActions.ARRAY_OF_ROWS_TO_CSV:if(null==(o=this.input)||!o.rows)throw new Error("rows is required in input for "+t.CsvExcelActions.ARRAY_OF_ROWS_TO_CSV);break;case t.CsvExcelActions.JSON_TO_EXCEL:if(null==(i=this.input)||!i.json_file_url)throw new Error("json_file_url is required in input for "+t.CsvExcelActions.JSON_TO_EXCEL);break;case t.CsvExcelActions.JSON_DATA_TO_EXCEL:if(null==(a=this.input)||!a.json_data)throw new Error("json_data is required in input for "+t.CsvExcelActions.JSON_DATA_TO_EXCEL);break;case t.CsvExcelActions.CSV_TO_EXCEL:if(null==(s=this.input)||!s.csv_file_url)throw new Error("csv_file_url is required in input for "+t.CsvExcelActions.CSV_TO_EXCEL);break;case t.CsvExcelActions.MERGE_EXCEL_FILES:if(null==(u=this.input)||!u.excel_files)throw new Error("excel_files is required in input for "+t.CsvExcelActions.MERGE_EXCEL_FILES);break;case t.CsvExcelActions.WRITE_DATA_TO_FILE:if(null==(d=this.input)||!d.data)throw new Error("data is required in input for "+t.CsvExcelActions.WRITE_DATA_TO_FILE);if(null==(c=this.input)||!c.file_format||!["csv","json","excel","text"].includes(this.input.file_format))throw new Error("file_format is required in input for "+t.CsvExcelActions.WRITE_DATA_TO_FILE);break;case t.CsvExcelActions.JSON_TO_X12_EDI:if(null==(f=this.input)||!f.json_data)throw new Error("json_data is required in input for "+t.CsvExcelActions.JSON_TO_X12_EDI);break;case t.CsvExcelActions.X12_EDI_TO_JSON:if(null==(_=this.input)||!_.x12_edi_data)throw new Error("x12_edi_data is required in input for "+t.CsvExcelActions.X12_EDI_TO_JSON);break;case t.CsvExcelActions.CXML_TO_JSON:if(null==(l=this.input)||!l.cxml_data)throw new Error("cxml_data is required in input for "+t.CsvExcelActions.CXML_TO_JSON);break;case t.CsvExcelActions.JSON_TO_CXML:if(null==(p=this.input)||!p.json_data)throw new Error("json_data is required in input for "+t.CsvExcelActions.JSON_TO_CXML)}},n}(T),H=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"subflow",action:e.action,input:e.input,name:e.name,description:e.description,id:e.id})||this}return s(e,t),e.prototype.validateInput=function(){if(!this.input.workflow_id||"string"!=typeof this.input.workflow_id)throw new Error("Input must contain workflow_id as a string");if(void 0!==this.input.sync_execution&&"boolean"!=typeof this.input.sync_execution)throw new Error("Input must contain sync_execution as a boolean value");if(void 0!==this.input.wait_for_completion_for_async_execution&&"boolean"!=typeof this.input.wait_for_completion_for_async_execution)throw new Error("Input must contain wait_for_completion_for_async_execution as a boolean value");if(void 0!==this.input.payload&&"object"!=typeof this.input.payload)throw new Error("Input must contain payload as an object")},e}(T),z=/*#__PURE__*/function(t){function e(e){return t.call(this,{slug:"internal_functions",action:e.action,input:e.input,name:e.name,description:e.description,id:e.id})||this}return s(e,t),e}(T);function V(t,e){void 0===e&&(e=[]);var n=e.join("."),r="{{"+t+".fields"+(n?"."+n:"")+"}}";return new Proxy({__isConfigRef:!0,configType:t,path:e},{get:function(n,o){return"toString"===o||o===Symbol.toPrimitive||"valueOf"===o?function(){return r}:"string"!=typeof o||o in n?n[o]:V(t,[].concat(e,[o]))}})}var Z={APPLICATION:V("application",[]),WORKFLOW:V("workflow",[])};t.CodeExecutorNode=B,t.CsvExcelNode=U,t.DataMapperNode=J,t.DataRefNode=Y,t.DelayNode=G,t.EmailNode=M,t.ExternalApp=L,t.FileHandlerNode=q,t.GroupNode=D,t.HttpNode=j,t.InternalFunctionNode=z,t.PDFNode=W,t.RefoldConfig=Z,t.ResponseNode=P,t.RuleNode=C,t.StartNode=F,t.SubflowNode=H,t.SwitchNode=N,t.TableNode=X,t.Workflow=x});
